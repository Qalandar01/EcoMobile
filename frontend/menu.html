<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background-color: #f8f9fa;
        }
        .product-card {
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease-in-out;
        }
        .product-card:hover {
            transform: scale(1.05);
        }
        .product-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        .stars span {
            font-size: 20px;
            cursor: pointer;
            color: lightgray;
        }
        .stars span.active {
            color: gold;
        }
        .color-options {
            display: flex;
            gap: 5px;
            margin-top: 5px;
        }
        .color-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #ccc;
        }
        .color-option.selected {
            border: 2px solid black;
        }
    </style>
</head>
<body>
<div class="container mt-4">
    <h2 class="fw-bold">Clothes</h2>
    <div id="product-list" class="row g-3">
        <!-- Products will be inserted here -->
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const products = [
            { name: "Roller Rabbit", description: "Vado Odelle Dress", price: 198.00, image: "https://via.placeholder.com/200", colors: ["red", "blue", "green"], rating: 0 },
            { name: "endless rose", description: "Bubble Elastic T-shirt", price: 50.00, image: "https://via.placeholder.com/200", colors: ["yellow", "black", "pink"], rating: 0 },
            { name: "Theory", description: "Irregular Rib Skirt", price: 345.00, image: "https://via.placeholder.com/200", colors: ["purple", "gray", "brown"], rating: 0 },
            { name: "Madewell", description: "Giselle Top in White Linen", price: 69.50, image: "https://via.placeholder.com/200", colors: ["white", "beige", "navy"], rating: 0 }
        ];

        const productList = document.getElementById("product-list");

        products.forEach((product, index) => {
            const productCard = document.createElement("div");
            productCard.className = "col-6 col-md-4 col-lg-3";
            productCard.innerHTML = `
                <div class="card product-card shadow-sm">
                    <img src="${product.image}" class="card-img-top" alt="${product.name}">
                    <div class="card-body">
                        <h6 class="fw-bold">${product.name}</h6>
                        <p class="text-muted">${product.description}</p>
                        <h5 class="text-primary">$${product.price.toFixed(2)}</h5>

                        <!-- Yulduzcha reytingi -->
                        <div class="stars" data-index="${index}">
                            ★ ★ ★ ★ ★
                        </div>

                        <!-- Rang variantlari -->
                        <div class="color-options">
                            ${product.colors.map(color => `<div class="color-option" data-index="${index}" data-color="${color}" style="background-color: ${color};"></div>`).join("")}
                        </div>
                    </div>
                </div>
            `;
            productList.appendChild(productCard);
        });

        // Yulduzcha baho berish
        document.querySelectorAll(".stars").forEach(starsContainer => {
            const index = starsContainer.getAttribute("data-index");
            const stars = starsContainer.innerText.split(" ").map((star, i) => `<span data-index="${index}" data-star="${i + 1}">★</span>`).join(" ");
            starsContainer.innerHTML = stars;
        });

        document.addEventListener("click", function(event) {
            if (event.target.matches(".stars span")) {
                const starIndex = event.target.getAttribute("data-star");
                const productIndex = event.target.getAttribute("data-index");
                const starsContainer = document.querySelector(`.stars[data-index="${productIndex}"]`);

                // Reytingni yangilash
                products[productIndex].rating = starIndex;
                starsContainer.querySelectorAll("span").forEach((star, i) => {
                    star.classList.toggle("active", i < starIndex);
                });
            }

            if (event.target.matches(".color-option")) {
                const productIndex = event.target.getAttribute("data-index");
                const selectedColor = event.target.getAttribute("data-color");

                // Oldindan tanlangan rangni olib tashlash
                document.querySelectorAll(`.color-option[data-index="${productIndex}"]`).forEach(colorOption => {
                    colorOption.classList.remove("selected");
                });

                // Tanlangan rangni belgilash
                event.target.classList.add("selected");
            }
        });
    });
</script>
</body>
</html>
